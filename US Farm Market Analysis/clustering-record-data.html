<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Introduction​, Farms​">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>clustering record data</title>
    <link rel="stylesheet" href="page.css" media="screen">
<link rel="stylesheet" href="clustering-record-data.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="page.js" defer=""></script>
    <meta name="generator" content="page 3.27.0, page.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i">
    
    
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="clustering record data">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body u-custom-color-1"><header class="u-clearfix u-custom-color-1 u-header u-header" id="sec-0fb1"><div class="u-align-left u-clearfix u-sheet u-sheet-1"></div></header>
    <section class="u-clearfix u-custom-color-2 u-section-1" id="sec-fe08">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-align-center u-text u-text-custom-color-6 u-text-1">
          <span style="font-size: 3rem;">Clustering - Record Data (R)</span>
        </h2>
        <p class="u-text u-text-custom-color-3 u-text-2">This page will go through the process of clustering record data gathered from ERS website. In the previous page, the code gathered the financial statement of diary, cattle, wheat, coconet-peanut-tobacco(abbreviated as CPT from now on), all other livestock, and corn farms among the surveyed states in 2019 fiscal year. The code also gathered the farm number within each production category among each surveyed state.&nbsp;<br>
          <br>In the data cleaning page, it shows how the raw data is being cleaned and saved as .csv files, so in this section, the main focus is to cluster the cleaned record data using R Studio.<br>
          <br>Below is the screenshot of the record data before clustering.<br>
          <br>
          <br>
          <br>


          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>&nbsp;<br>Here is the full code of clustering&nbsp;<span style="font-weight: 700;">
            <a href="files/Rcodeforrecorddataclustering.pdf" class="u-active-none u-border-none u-btn u-button-link u-button-style u-file-link u-hover-none u-none u-text-palette-1-base u-btn-1" target="_blank">(download)</a>
          </span>:<br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          Here is the full code of clustering <a href="files/Rcodeforrecorddataclustering.pdf" class="u-active-none u-border-none u-btn u-button-link u-button-style u-file-link u-hover-none u-none u-text-palette-1-base u-btn-1" target="_blank">(download)</a>

          <br>
          
          <embed src="files/Rcodeforrecorddataclustering.pdf#toolbar=0&embedded=true&zoom=140" style="-webkit-transform:scale(1);-moz-transform-scale(1)" width="100%" height="1300px" frameborder="0">
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>First is to find the optimum value of k. - <a href="https://en.wikipedia.org/wiki/Elbow_method_(clustering)" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-2" target="_blank">Elbow method</a>, <a href="https://en.wikipedia.org/wiki/Silhouette_(clustering)" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-3" target="_blank">Silhouette method</a>, and <a href="https://towardsdatascience.com/k-means-clustering-and-the-gap-statistics-4c5d414acd29" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-4" target="_blank">Gap method</a>.&nbsp;<br>
          <br>The Elbow method shows the optimal k value can be 2 or 3. The Silhouette method shows the optimal value of k is 2. The Gap method shows k can be 2, 3, 5.<br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>Second, the four distance matrices are used to analyze the dataframe as a matrix. <a href="https://en.wikipedia.org/wiki/Euclidean_distance" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-5" target="_blank">Euclidean distance</a>, <a href="https://towardsdatascience.com/log-book-guide-to-distance-measuring-approaches-for-k-means-clustering-f137807e8e21#:~:text=Manhattan%20distance%20captures%20the%20distance,squared%20difference%20in%20each%20variable." class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-6" target="_blank">Manhattan distance</a>, <a href="https://en.wikipedia.org/wiki/Minkowski_distance" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-7" target="_blank">Minkowski distance</a>, and <a href="https://en.wikipedia.org/wiki/Cosine_similarity" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-8" target="_blank">Cosine similarity</a>.&nbsp;<br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>From the results of distance matrices, it's still hard to analyze the distance between each rows since it's a 10 dimentional data.<br>
          <br>Next step is to use hierarchical clustering methods to cluster the data. The code used two Ward's minimun variance methods, Nearest neighbor method, and Complete method. Each method randomly paired with the four distance matrices produced in the last step. The 4 dendrograms are below:<br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>The Ward method and Complete method shows the k value for clustering is better to be 2, whereas the Ward method 2 tells the k value can be 2, 3, 5.<br>
          <br>After knowing the ideal k values, the code visualized a cluster plot and a heat map using k=2, 3, 5.&nbsp;<br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>The visualization shows there is one distinct cluster with the mininal entities, and the rest are not as distinct as the first cluster but contain the majority of the dataset.&nbsp;<br>
          <br>
          <br>
          <span style="font-weight: 700;">Summary</span>
          <br>The "takehome message" from clustering record data using R is be careful about setting the range of the Elbow, Silhouette, or Gap method graph. It's very important to try out large range and small range to compare the graphs and to find the optimum value of k.&nbsp;<br>
          <br>Also, the time of gathering, cleaning data is way longer than the time of making visualization and clustering in R since Python is another story...&nbsp;Overall, R Studio has won the competition on making better clustering visualizations and prettier graphs.&nbsp;<br>
          <br>The original labels are the different agricultural products that are offered by the farms in all the surveyed states. The clustering results suggest k's ideal value as 4, but it does't  match exactly with the number of labels which is 6, because the dataset is 2019's financial statements accross all the surveyed states. The diviations between each surveyed state might have some impact on certain products' financial statements. It's reasonable that there's a slight difference.<br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
        </p>
        <img class="u-image u-image-default u-image-1" src="images/Euclideanmethod.png" alt="" data-image-width="1600" data-image-height="493">
        <img class="u-expanded-width u-image u-image-default u-image-2" src="images/Minkowskimethod.png" alt="" data-image-width="1600" data-image-height="396">
        <img class="u-expanded-width u-image u-image-default u-image-3" src="images/Manhattanmethod.png" alt="" data-image-width="1600" data-image-height="362">
        <img class="u-expanded-width u-image u-image-default u-image-4" src="images/Cosinemethod.png" alt="" data-image-width="1600" data-image-height="525">
        <img class="u-expanded-width u-image u-image-default u-image-5" src="images/4dengrograms1.png" alt="" data-image-width="998" data-image-height="965">
        <img class="u-expanded-width u-image u-image-default u-image-6" src="images/optimalk.png" alt="" data-image-width="1153" data-image-height="965">
        <img class="u-expanded-width u-image u-image-default u-image-7" src="images/clusterplotk2.png" alt="" data-image-width="1168" data-image-height="965">
        <img class="u-expanded-width u-image u-image-default u-image-8" src="images/heatmapk2.png" alt="" data-image-width="1600" data-image-height="1320">
        <img class="u-expanded-width u-image u-image-default u-image-9" src="images/clusterplotk3.png" alt="" data-image-width="1168" data-image-height="965">
        <img class="u-expanded-width u-image u-image-default u-image-10" src="images/heatmapk3.png" alt="" data-image-width="1600" data-image-height="1349">
        <img class="u-expanded-width u-image u-image-default u-image-11" src="images/clusterplotk5.png" alt="" data-image-width="1143" data-image-height="965">
        <img class="u-expanded-width u-image u-image-default u-image-12" src="images/heatmapk5.png" alt="" data-image-width="1600" data-image-height="1349">
        <img class="u-expanded-width u-image u-image-default u-image-13" src="images/beforeclusteringrecorddata1.png" alt="" data-image-width="2292" data-image-height="1720">
      </div>
    </section>
    
    
    </section>
  </body>
</html>